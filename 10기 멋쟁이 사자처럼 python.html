{
 "cells": [
  {
   "cell_type": "markdown",
   "metadata": {},
   "source": [
    "\n",
    "# 10기 멋쟁이 사자처럼 python 과제\n",
    "<br>\n",
    "<div style = \"font-weight: 800;\">\n",
    "<ol>\n",
    "<li>이름: 김서영</li>\n",
    "<li>학번: 2020313603 </li>\n",
    "<li>학과: 컬처앤테크놀로지융합전공 </li>\n",
    "<li>일시: 2022-05-11</li>\n",
    "<br>\n",
    "<ol>\n",
    "</div>\n",
    "\n",
    "<h3>크롤링하기:</h3>\n"
   ]
  },
  {
   "cell_type": "markdown",
   "metadata": {},
   "source": [
    "## Problem1 \n",
    "### 문제1\n",
    "<div style = \"margin-top:30px\">\n",
    "영화 목록 API를 이용하여 감독의 이름이 \"봉준호\"인 영화의 목록을 받아 데이터 프레임을 생성한 후, 'prdtYear'변수를 기준으로 오름차순을 정렬하세요. 'directors'컬럼과 'companys'컬럼은 이름만 남도록 변경해주세요.\n",
    "</div>"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 1,
   "metadata": {},
   "outputs": [
    {
     "data": {
      "text/html": [
       "<div>\n",
       "<style scoped>\n",
       "    .dataframe tbody tr th:only-of-type {\n",
       "        vertical-align: middle;\n",
       "    }\n",
       "\n",
       "    .dataframe tbody tr th {\n",
       "        vertical-align: top;\n",
       "    }\n",
       "\n",
       "    .dataframe thead th {\n",
       "        text-align: right;\n",
       "    }\n",
       "</style>\n",
       "<table border=\"1\" class=\"dataframe\">\n",
       "  <thead>\n",
       "    <tr style=\"text-align: right;\">\n",
       "      <th></th>\n",
       "      <th>movieCd</th>\n",
       "      <th>movieNm</th>\n",
       "      <th>movieNmEn</th>\n",
       "      <th>prdtYear</th>\n",
       "      <th>openDt</th>\n",
       "      <th>typeNm</th>\n",
       "      <th>prdtStatNm</th>\n",
       "      <th>nationAlt</th>\n",
       "      <th>genreAlt</th>\n",
       "      <th>repNationNm</th>\n",
       "      <th>repGenreNm</th>\n",
       "      <th>directors</th>\n",
       "      <th>companys</th>\n",
       "    </tr>\n",
       "  </thead>\n",
       "  <tbody>\n",
       "    <tr>\n",
       "      <th>1</th>\n",
       "      <td>20100457</td>\n",
       "      <td>지리멸렬</td>\n",
       "      <td>Incoherence</td>\n",
       "      <td>1994</td>\n",
       "      <td></td>\n",
       "      <td>단편</td>\n",
       "      <td>기타</td>\n",
       "      <td>한국</td>\n",
       "      <td>코미디</td>\n",
       "      <td>한국</td>\n",
       "      <td>코미디</td>\n",
       "      <td>봉준호</td>\n",
       "      <td>한국영화아카데미</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>2</th>\n",
       "      <td>20149067</td>\n",
       "      <td>백색인</td>\n",
       "      <td>White Collar</td>\n",
       "      <td>1994</td>\n",
       "      <td></td>\n",
       "      <td>단편</td>\n",
       "      <td>기타</td>\n",
       "      <td>한국</td>\n",
       "      <td>기타</td>\n",
       "      <td>한국</td>\n",
       "      <td>기타</td>\n",
       "      <td>봉준호</td>\n",
       "      <td>[]</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>9</th>\n",
       "      <td>20000024</td>\n",
       "      <td>플란다스의 개</td>\n",
       "      <td>Barking Dogs Never Bite</td>\n",
       "      <td>2000</td>\n",
       "      <td>20000219</td>\n",
       "      <td>장편</td>\n",
       "      <td>개봉</td>\n",
       "      <td>한국</td>\n",
       "      <td>드라마,코미디</td>\n",
       "      <td>한국</td>\n",
       "      <td>드라마</td>\n",
       "      <td>봉준호</td>\n",
       "      <td>우노필름</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>5</th>\n",
       "      <td>20030046</td>\n",
       "      <td>살인의 추억</td>\n",
       "      <td>Memories of Murder</td>\n",
       "      <td>2003</td>\n",
       "      <td>20030425</td>\n",
       "      <td>장편</td>\n",
       "      <td>개봉</td>\n",
       "      <td>한국</td>\n",
       "      <td>스릴러</td>\n",
       "      <td>한국</td>\n",
       "      <td>스릴러</td>\n",
       "      <td>봉준호</td>\n",
       "      <td>(주)싸이더스</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>0</th>\n",
       "      <td>20072091</td>\n",
       "      <td>인플루엔자</td>\n",
       "      <td>Influenza</td>\n",
       "      <td>2004</td>\n",
       "      <td></td>\n",
       "      <td>단편</td>\n",
       "      <td>기타</td>\n",
       "      <td>한국</td>\n",
       "      <td>드라마</td>\n",
       "      <td>한국</td>\n",
       "      <td>드라마</td>\n",
       "      <td>봉준호</td>\n",
       "      <td>[]</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>6</th>\n",
       "      <td>20060151</td>\n",
       "      <td>괴물</td>\n",
       "      <td>The Host</td>\n",
       "      <td>2006</td>\n",
       "      <td>20060727</td>\n",
       "      <td>장편</td>\n",
       "      <td>개봉</td>\n",
       "      <td>한국</td>\n",
       "      <td>SF,가족,드라마</td>\n",
       "      <td>한국</td>\n",
       "      <td>SF</td>\n",
       "      <td>봉준호</td>\n",
       "      <td>영화사청어람(주)</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>4</th>\n",
       "      <td>20090248</td>\n",
       "      <td>마더</td>\n",
       "      <td>Mother</td>\n",
       "      <td>2009</td>\n",
       "      <td>20090528</td>\n",
       "      <td>장편</td>\n",
       "      <td>개봉</td>\n",
       "      <td>한국</td>\n",
       "      <td>드라마</td>\n",
       "      <td>한국</td>\n",
       "      <td>드라마</td>\n",
       "      <td>봉준호</td>\n",
       "      <td>(주)바른손이앤에이</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>7</th>\n",
       "      <td>20126674</td>\n",
       "      <td>설국열차</td>\n",
       "      <td>Snowpiercer</td>\n",
       "      <td>2013</td>\n",
       "      <td>20130801</td>\n",
       "      <td>장편</td>\n",
       "      <td>개봉</td>\n",
       "      <td>한국,체코</td>\n",
       "      <td>SF,액션</td>\n",
       "      <td>한국</td>\n",
       "      <td>SF</td>\n",
       "      <td>봉준호</td>\n",
       "      <td>(주)모호필름</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>8</th>\n",
       "      <td>20158485</td>\n",
       "      <td>옥자</td>\n",
       "      <td>Okja</td>\n",
       "      <td>2017</td>\n",
       "      <td>20170629</td>\n",
       "      <td>장편</td>\n",
       "      <td>개봉</td>\n",
       "      <td>미국</td>\n",
       "      <td>어드벤처,액션,드라마</td>\n",
       "      <td>미국</td>\n",
       "      <td>어드벤처</td>\n",
       "      <td>봉준호</td>\n",
       "      <td>플랜 비 엔터테인먼트</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>3</th>\n",
       "      <td>20183782</td>\n",
       "      <td>기생충</td>\n",
       "      <td>PARASITE</td>\n",
       "      <td>2019</td>\n",
       "      <td>20190530</td>\n",
       "      <td>장편</td>\n",
       "      <td>개봉</td>\n",
       "      <td>한국</td>\n",
       "      <td>드라마</td>\n",
       "      <td>한국</td>\n",
       "      <td>드라마</td>\n",
       "      <td>봉준호</td>\n",
       "      <td>(주)바른손이앤에이</td>\n",
       "    </tr>\n",
       "  </tbody>\n",
       "</table>\n",
       "</div>"
      ],
      "text/plain": [
       "    movieCd  movieNm                movieNmEn prdtYear    openDt typeNm  \\\n",
       "1  20100457     지리멸렬              Incoherence     1994               단편   \n",
       "2  20149067      백색인             White Collar     1994               단편   \n",
       "9  20000024  플란다스의 개  Barking Dogs Never Bite     2000  20000219     장편   \n",
       "5  20030046   살인의 추억       Memories of Murder     2003  20030425     장편   \n",
       "0  20072091    인플루엔자                Influenza     2004               단편   \n",
       "6  20060151       괴물                 The Host     2006  20060727     장편   \n",
       "4  20090248       마더                   Mother     2009  20090528     장편   \n",
       "7  20126674     설국열차              Snowpiercer     2013  20130801     장편   \n",
       "8  20158485       옥자                     Okja     2017  20170629     장편   \n",
       "3  20183782      기생충                 PARASITE     2019  20190530     장편   \n",
       "\n",
       "  prdtStatNm nationAlt     genreAlt repNationNm repGenreNm directors  \\\n",
       "1         기타        한국          코미디          한국        코미디       봉준호   \n",
       "2         기타        한국           기타          한국         기타       봉준호   \n",
       "9         개봉        한국      드라마,코미디          한국        드라마       봉준호   \n",
       "5         개봉        한국          스릴러          한국        스릴러       봉준호   \n",
       "0         기타        한국          드라마          한국        드라마       봉준호   \n",
       "6         개봉        한국    SF,가족,드라마          한국         SF       봉준호   \n",
       "4         개봉        한국          드라마          한국        드라마       봉준호   \n",
       "7         개봉     한국,체코        SF,액션          한국         SF       봉준호   \n",
       "8         개봉        미국  어드벤처,액션,드라마          미국       어드벤처       봉준호   \n",
       "3         개봉        한국          드라마          한국        드라마       봉준호   \n",
       "\n",
       "      companys  \n",
       "1     한국영화아카데미  \n",
       "2           []  \n",
       "9         우노필름  \n",
       "5      (주)싸이더스  \n",
       "0           []  \n",
       "6    영화사청어람(주)  \n",
       "4   (주)바른손이앤에이  \n",
       "7      (주)모호필름  \n",
       "8  플랜 비 엔터테인먼트  \n",
       "3   (주)바른손이앤에이  "
      ]
     },
     "execution_count": 1,
     "metadata": {},
     "output_type": "execute_result"
    }
   ],
   "source": [
    "\n",
    "import requests\n",
    "import pandas as pd\n",
    "from bs4 import BeautifulSoup\n",
    "import bs4\n",
    "import json\n",
    "\n",
    "key = 'a8e597633acca03091ad5fba598b58a7'\n",
    "url = \"http://kobis.or.kr/kobisopenapi/webservice/rest/movie/searchMovieList.json?key=\" + key\n",
    "parameter = {\"directorNm\": \"봉준호\"}\n",
    "req = requests.get(url, parameter)\n",
    "\n",
    "html= req.json()\n",
    "html\n",
    "DF = pd.DataFrame(html['movieListResult'][\"movieList\"])\n",
    "DF = DF.sort_values(\"prdtYear\")\n",
    "DF['directors'] = DF['directors'].apply(lambda x : x[0]['peopleNm'])\n",
    "DF['companys'] = DF['companys'].apply(lambda x : x[0]['companyNm'] if x else x)\n",
    "\n",
    "DF"
   ]
  },
  {
   "cell_type": "markdown",
   "metadata": {},
   "source": [
    "### 문제2: \n",
    "<div style = \"margin-top:30px\">\n",
    "\n",
    "일별 박스오피스 API를 이용하여 2018년의 한국 영화 일별 박스오피스 데이터를 생성하여 csv파일로 저장하세요.\n",
    "</div>"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 2,
   "metadata": {},
   "outputs": [],
   "source": [
    "\n",
    "date = pd.date_range('20180101', '20181231')\n",
    "date\n",
    "\n",
    "Time = []\n",
    "for time in date:    \n",
    "    Time.append(date.strftime(\"%Y%m%d\").tolist())\n",
    "    \n",
    "time_list=Time[0] \n"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 12,
   "metadata": {},
   "outputs": [
    {
     "data": {
      "text/html": [
       "<div>\n",
       "<style scoped>\n",
       "    .dataframe tbody tr th:only-of-type {\n",
       "        vertical-align: middle;\n",
       "    }\n",
       "\n",
       "    .dataframe tbody tr th {\n",
       "        vertical-align: top;\n",
       "    }\n",
       "\n",
       "    .dataframe thead th {\n",
       "        text-align: right;\n",
       "    }\n",
       "</style>\n",
       "<table border=\"1\" class=\"dataframe\">\n",
       "  <thead>\n",
       "    <tr style=\"text-align: right;\">\n",
       "      <th></th>\n",
       "      <th>rnum</th>\n",
       "      <th>rank</th>\n",
       "      <th>rankInten</th>\n",
       "      <th>rankOldAndNew</th>\n",
       "      <th>movieCd</th>\n",
       "      <th>movieNm</th>\n",
       "      <th>openDt</th>\n",
       "      <th>salesAmt</th>\n",
       "      <th>salesShare</th>\n",
       "      <th>salesInten</th>\n",
       "      <th>salesChange</th>\n",
       "      <th>salesAcc</th>\n",
       "      <th>audiCnt</th>\n",
       "      <th>audiInten</th>\n",
       "      <th>audiChange</th>\n",
       "      <th>audiAcc</th>\n",
       "      <th>scrnCnt</th>\n",
       "      <th>showCnt</th>\n",
       "    </tr>\n",
       "  </thead>\n",
       "  <tbody>\n",
       "    <tr>\n",
       "      <th>0</th>\n",
       "      <td>1</td>\n",
       "      <td>1</td>\n",
       "      <td>0</td>\n",
       "      <td>OLD</td>\n",
       "      <td>20150976</td>\n",
       "      <td>신과함께-죄와 벌</td>\n",
       "      <td>2017-12-20</td>\n",
       "      <td>7715149100</td>\n",
       "      <td>52.9</td>\n",
       "      <td>-853021100</td>\n",
       "      <td>-10</td>\n",
       "      <td>76065645532</td>\n",
       "      <td>916652</td>\n",
       "      <td>-107305</td>\n",
       "      <td>-10.5</td>\n",
       "      <td>9456147</td>\n",
       "      <td>1644</td>\n",
       "      <td>7957</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>1</th>\n",
       "      <td>2</td>\n",
       "      <td>2</td>\n",
       "      <td>0</td>\n",
       "      <td>OLD</td>\n",
       "      <td>20170590</td>\n",
       "      <td>1987</td>\n",
       "      <td>2017-12-27</td>\n",
       "      <td>4460462100</td>\n",
       "      <td>30.6</td>\n",
       "      <td>-224621200</td>\n",
       "      <td>-4.8</td>\n",
       "      <td>19714466137</td>\n",
       "      <td>531469</td>\n",
       "      <td>-28577</td>\n",
       "      <td>-5.1</td>\n",
       "      <td>2473546</td>\n",
       "      <td>1097</td>\n",
       "      <td>4982</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>2</th>\n",
       "      <td>3</td>\n",
       "      <td>3</td>\n",
       "      <td>0</td>\n",
       "      <td>OLD</td>\n",
       "      <td>20170402</td>\n",
       "      <td>강철비</td>\n",
       "      <td>2017-12-14</td>\n",
       "      <td>944228600</td>\n",
       "      <td>6.5</td>\n",
       "      <td>-48816300</td>\n",
       "      <td>-4.9</td>\n",
       "      <td>32939126166</td>\n",
       "      <td>114298</td>\n",
       "      <td>-6548</td>\n",
       "      <td>-5.4</td>\n",
       "      <td>4128591</td>\n",
       "      <td>602</td>\n",
       "      <td>1451</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>3</th>\n",
       "      <td>4</td>\n",
       "      <td>4</td>\n",
       "      <td>0</td>\n",
       "      <td>OLD</td>\n",
       "      <td>20179462</td>\n",
       "      <td>위대한 쇼맨</td>\n",
       "      <td>2017-12-20</td>\n",
       "      <td>509947700</td>\n",
       "      <td>3.5</td>\n",
       "      <td>25348100</td>\n",
       "      <td>5.2</td>\n",
       "      <td>7166974900</td>\n",
       "      <td>60070</td>\n",
       "      <td>2402</td>\n",
       "      <td>4.2</td>\n",
       "      <td>874655</td>\n",
       "      <td>432</td>\n",
       "      <td>843</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>4</th>\n",
       "      <td>5</td>\n",
       "      <td>5</td>\n",
       "      <td>0</td>\n",
       "      <td>OLD</td>\n",
       "      <td>20174965</td>\n",
       "      <td>극장판 포켓몬스터 너로 정했다!</td>\n",
       "      <td>2017-12-21</td>\n",
       "      <td>262886500</td>\n",
       "      <td>1.8</td>\n",
       "      <td>-7375400</td>\n",
       "      <td>-2.7</td>\n",
       "      <td>3380416200</td>\n",
       "      <td>34103</td>\n",
       "      <td>-1037</td>\n",
       "      <td>-3</td>\n",
       "      <td>449358</td>\n",
       "      <td>417</td>\n",
       "      <td>605</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>...</th>\n",
       "      <td>...</td>\n",
       "      <td>...</td>\n",
       "      <td>...</td>\n",
       "      <td>...</td>\n",
       "      <td>...</td>\n",
       "      <td>...</td>\n",
       "      <td>...</td>\n",
       "      <td>...</td>\n",
       "      <td>...</td>\n",
       "      <td>...</td>\n",
       "      <td>...</td>\n",
       "      <td>...</td>\n",
       "      <td>...</td>\n",
       "      <td>...</td>\n",
       "      <td>...</td>\n",
       "      <td>...</td>\n",
       "      <td>...</td>\n",
       "      <td>...</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>5</th>\n",
       "      <td>6</td>\n",
       "      <td>6</td>\n",
       "      <td>1</td>\n",
       "      <td>OLD</td>\n",
       "      <td>20173202</td>\n",
       "      <td>버닝</td>\n",
       "      <td>2018-05-17</td>\n",
       "      <td>69750600</td>\n",
       "      <td>3.2</td>\n",
       "      <td>-86053000</td>\n",
       "      <td>-55.2</td>\n",
       "      <td>4104944098</td>\n",
       "      <td>8382</td>\n",
       "      <td>-8186</td>\n",
       "      <td>-49.4</td>\n",
       "      <td>457234</td>\n",
       "      <td>435</td>\n",
       "      <td>935</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>6</th>\n",
       "      <td>7</td>\n",
       "      <td>7</td>\n",
       "      <td>2</td>\n",
       "      <td>OLD</td>\n",
       "      <td>20182046</td>\n",
       "      <td>안녕, 나의 소녀</td>\n",
       "      <td>2018-05-16</td>\n",
       "      <td>12666500</td>\n",
       "      <td>0.6</td>\n",
       "      <td>-25944000</td>\n",
       "      <td>-67.2</td>\n",
       "      <td>732960934</td>\n",
       "      <td>1667</td>\n",
       "      <td>-3021</td>\n",
       "      <td>-64.4</td>\n",
       "      <td>93511</td>\n",
       "      <td>109</td>\n",
       "      <td>223</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>7</th>\n",
       "      <td>8</td>\n",
       "      <td>8</td>\n",
       "      <td>-3</td>\n",
       "      <td>OLD</td>\n",
       "      <td>20183084</td>\n",
       "      <td>피터 래빗</td>\n",
       "      <td>2018-05-16</td>\n",
       "      <td>11733600</td>\n",
       "      <td>0.5</td>\n",
       "      <td>-289451500</td>\n",
       "      <td>-96.1</td>\n",
       "      <td>2410607300</td>\n",
       "      <td>1589</td>\n",
       "      <td>-36215</td>\n",
       "      <td>-95.8</td>\n",
       "      <td>311513</td>\n",
       "      <td>233</td>\n",
       "      <td>293</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>8</th>\n",
       "      <td>9</td>\n",
       "      <td>9</td>\n",
       "      <td>0</td>\n",
       "      <td>NEW</td>\n",
       "      <td>20184132</td>\n",
       "      <td>세라비, 이것이 인생!</td>\n",
       "      <td>2018-05-30</td>\n",
       "      <td>3888000</td>\n",
       "      <td>0.2</td>\n",
       "      <td>3888000</td>\n",
       "      <td>100</td>\n",
       "      <td>23598000</td>\n",
       "      <td>972</td>\n",
       "      <td>972</td>\n",
       "      <td>100</td>\n",
       "      <td>3051</td>\n",
       "      <td>2</td>\n",
       "      <td>3</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>9</th>\n",
       "      <td>10</td>\n",
       "      <td>10</td>\n",
       "      <td>26</td>\n",
       "      <td>OLD</td>\n",
       "      <td>20178424</td>\n",
       "      <td>레이디 버드</td>\n",
       "      <td>2018-04-04</td>\n",
       "      <td>7034000</td>\n",
       "      <td>0.3</td>\n",
       "      <td>5967500</td>\n",
       "      <td>559.5</td>\n",
       "      <td>818648000</td>\n",
       "      <td>791</td>\n",
       "      <td>680</td>\n",
       "      <td>612.6</td>\n",
       "      <td>100692</td>\n",
       "      <td>6</td>\n",
       "      <td>7</td>\n",
       "    </tr>\n",
       "  </tbody>\n",
       "</table>\n",
       "<p>1110 rows × 18 columns</p>\n",
       "</div>"
      ],
      "text/plain": [
       "   rnum rank rankInten rankOldAndNew   movieCd            movieNm      openDt  \\\n",
       "0     1    1         0           OLD  20150976          신과함께-죄와 벌  2017-12-20   \n",
       "1     2    2         0           OLD  20170590               1987  2017-12-27   \n",
       "2     3    3         0           OLD  20170402                강철비  2017-12-14   \n",
       "3     4    4         0           OLD  20179462             위대한 쇼맨  2017-12-20   \n",
       "4     5    5         0           OLD  20174965  극장판 포켓몬스터 너로 정했다!  2017-12-21   \n",
       "..  ...  ...       ...           ...       ...                ...         ...   \n",
       "5     6    6         1           OLD  20173202                 버닝  2018-05-17   \n",
       "6     7    7         2           OLD  20182046          안녕, 나의 소녀  2018-05-16   \n",
       "7     8    8        -3           OLD  20183084              피터 래빗  2018-05-16   \n",
       "8     9    9         0           NEW  20184132       세라비, 이것이 인생!  2018-05-30   \n",
       "9    10   10        26           OLD  20178424             레이디 버드  2018-04-04   \n",
       "\n",
       "      salesAmt salesShare  salesInten salesChange     salesAcc audiCnt  \\\n",
       "0   7715149100       52.9  -853021100         -10  76065645532  916652   \n",
       "1   4460462100       30.6  -224621200        -4.8  19714466137  531469   \n",
       "2    944228600        6.5   -48816300        -4.9  32939126166  114298   \n",
       "3    509947700        3.5    25348100         5.2   7166974900   60070   \n",
       "4    262886500        1.8    -7375400        -2.7   3380416200   34103   \n",
       "..         ...        ...         ...         ...          ...     ...   \n",
       "5     69750600        3.2   -86053000       -55.2   4104944098    8382   \n",
       "6     12666500        0.6   -25944000       -67.2    732960934    1667   \n",
       "7     11733600        0.5  -289451500       -96.1   2410607300    1589   \n",
       "8      3888000        0.2     3888000         100     23598000     972   \n",
       "9      7034000        0.3     5967500       559.5    818648000     791   \n",
       "\n",
       "   audiInten audiChange  audiAcc scrnCnt showCnt  \n",
       "0    -107305      -10.5  9456147    1644    7957  \n",
       "1     -28577       -5.1  2473546    1097    4982  \n",
       "2      -6548       -5.4  4128591     602    1451  \n",
       "3       2402        4.2   874655     432     843  \n",
       "4      -1037         -3   449358     417     605  \n",
       "..       ...        ...      ...     ...     ...  \n",
       "5      -8186      -49.4   457234     435     935  \n",
       "6      -3021      -64.4    93511     109     223  \n",
       "7     -36215      -95.8   311513     233     293  \n",
       "8        972        100     3051       2       3  \n",
       "9        680      612.6   100692       6       7  \n",
       "\n",
       "[1110 rows x 18 columns]"
      ]
     },
     "execution_count": 12,
     "metadata": {},
     "output_type": "execute_result"
    }
   ],
   "source": [
    "requestData2 = requests.get(url+str(time_list[k])+'')\n",
    "data_2 = requestData2.json()\n",
    "data = data_2['boxOfficeResult']['dailyBoxOfficeList']\n",
    "df = pd.DataFrame.from_dict(data)\n",
    "df_default = df_default.append(df)\n",
    "df_default"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 13,
   "metadata": {},
   "outputs": [],
   "source": [
    "data = []\n",
    "key = 'a8e597633acca03091ad5fba598b58a7'\n",
    "url = \"http://kobis.or.kr/kobisopenapi/webservice/rest/boxoffice/searchDailyBoxOfficeList.json?key=\" + key + \"&targetDt=\"\n",
    "df_default = pd.DataFrame()\n",
    "for k in range(len(time_list)):\n",
    "    requestData2 = requests.get(url+str(time_list[k])+'')\n",
    "    try: \n",
    "        data_2 = requestData2.json()\n",
    "        data = data_2['boxOfficeResult']['dailyBoxOfficeList']\n",
    "        df = pd.DataFrame.from_dict(data)\n",
    "        df_default = df_default.append(df)\n",
    "    except:\n",
    "        pass"
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 14,
   "metadata": {},
   "outputs": [],
   "source": [
    "df_default.to_csv('data_result.csv',encoding='utf-8', index = False) ## 한글이 포함되어 있으므로, encoding에 utf-8을 넣는다.-> 파일을 저장한다."
   ]
  },
  {
   "cell_type": "code",
   "execution_count": 15,
   "metadata": {},
   "outputs": [
    {
     "data": {
      "text/html": [
       "<div>\n",
       "<style scoped>\n",
       "    .dataframe tbody tr th:only-of-type {\n",
       "        vertical-align: middle;\n",
       "    }\n",
       "\n",
       "    .dataframe tbody tr th {\n",
       "        vertical-align: top;\n",
       "    }\n",
       "\n",
       "    .dataframe thead th {\n",
       "        text-align: right;\n",
       "    }\n",
       "</style>\n",
       "<table border=\"1\" class=\"dataframe\">\n",
       "  <thead>\n",
       "    <tr style=\"text-align: right;\">\n",
       "      <th></th>\n",
       "      <th>rnum</th>\n",
       "      <th>rank</th>\n",
       "      <th>rankInten</th>\n",
       "      <th>rankOldAndNew</th>\n",
       "      <th>movieCd</th>\n",
       "      <th>movieNm</th>\n",
       "      <th>openDt</th>\n",
       "      <th>salesAmt</th>\n",
       "      <th>salesShare</th>\n",
       "      <th>salesInten</th>\n",
       "      <th>salesChange</th>\n",
       "      <th>salesAcc</th>\n",
       "      <th>audiCnt</th>\n",
       "      <th>audiInten</th>\n",
       "      <th>audiChange</th>\n",
       "      <th>audiAcc</th>\n",
       "      <th>scrnCnt</th>\n",
       "      <th>showCnt</th>\n",
       "    </tr>\n",
       "  </thead>\n",
       "  <tbody>\n",
       "    <tr>\n",
       "      <th>0</th>\n",
       "      <td>1</td>\n",
       "      <td>1</td>\n",
       "      <td>0</td>\n",
       "      <td>OLD</td>\n",
       "      <td>20150976</td>\n",
       "      <td>신과함께-죄와 벌</td>\n",
       "      <td>2017-12-20</td>\n",
       "      <td>2205440800</td>\n",
       "      <td>44.5</td>\n",
       "      <td>-5509708300</td>\n",
       "      <td>-71.4</td>\n",
       "      <td>78271086332</td>\n",
       "      <td>294339</td>\n",
       "      <td>-622313</td>\n",
       "      <td>-67.9</td>\n",
       "      <td>9750486</td>\n",
       "      <td>1446</td>\n",
       "      <td>7019</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>1</th>\n",
       "      <td>2</td>\n",
       "      <td>2</td>\n",
       "      <td>0</td>\n",
       "      <td>OLD</td>\n",
       "      <td>20170590</td>\n",
       "      <td>1987</td>\n",
       "      <td>2017-12-27</td>\n",
       "      <td>1643436600</td>\n",
       "      <td>33.1</td>\n",
       "      <td>-2817025500</td>\n",
       "      <td>-63.2</td>\n",
       "      <td>21357902737</td>\n",
       "      <td>217247</td>\n",
       "      <td>-314222</td>\n",
       "      <td>-59.1</td>\n",
       "      <td>2690793</td>\n",
       "      <td>1063</td>\n",
       "      <td>5044</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>2</th>\n",
       "      <td>3</td>\n",
       "      <td>3</td>\n",
       "      <td>0</td>\n",
       "      <td>OLD</td>\n",
       "      <td>20170402</td>\n",
       "      <td>강철비</td>\n",
       "      <td>2017-12-14</td>\n",
       "      <td>358149600</td>\n",
       "      <td>7.2</td>\n",
       "      <td>-586079000</td>\n",
       "      <td>-62.1</td>\n",
       "      <td>33297275766</td>\n",
       "      <td>48122</td>\n",
       "      <td>-66176</td>\n",
       "      <td>-57.9</td>\n",
       "      <td>4176713</td>\n",
       "      <td>580</td>\n",
       "      <td>1541</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>3</th>\n",
       "      <td>4</td>\n",
       "      <td>4</td>\n",
       "      <td>0</td>\n",
       "      <td>OLD</td>\n",
       "      <td>20179462</td>\n",
       "      <td>위대한 쇼맨</td>\n",
       "      <td>2017-12-20</td>\n",
       "      <td>269239500</td>\n",
       "      <td>5.4</td>\n",
       "      <td>-240708200</td>\n",
       "      <td>-47.2</td>\n",
       "      <td>7436214400</td>\n",
       "      <td>35177</td>\n",
       "      <td>-24893</td>\n",
       "      <td>-41.4</td>\n",
       "      <td>909832</td>\n",
       "      <td>444</td>\n",
       "      <td>949</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>4</th>\n",
       "      <td>5</td>\n",
       "      <td>5</td>\n",
       "      <td>0</td>\n",
       "      <td>OLD</td>\n",
       "      <td>20174965</td>\n",
       "      <td>극장판 포켓몬스터 너로 정했다!</td>\n",
       "      <td>2017-12-21</td>\n",
       "      <td>123797500</td>\n",
       "      <td>2.5</td>\n",
       "      <td>-139089000</td>\n",
       "      <td>-52.9</td>\n",
       "      <td>3504213700</td>\n",
       "      <td>17929</td>\n",
       "      <td>-16174</td>\n",
       "      <td>-47.4</td>\n",
       "      <td>467287</td>\n",
       "      <td>371</td>\n",
       "      <td>510</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>...</th>\n",
       "      <td>...</td>\n",
       "      <td>...</td>\n",
       "      <td>...</td>\n",
       "      <td>...</td>\n",
       "      <td>...</td>\n",
       "      <td>...</td>\n",
       "      <td>...</td>\n",
       "      <td>...</td>\n",
       "      <td>...</td>\n",
       "      <td>...</td>\n",
       "      <td>...</td>\n",
       "      <td>...</td>\n",
       "      <td>...</td>\n",
       "      <td>...</td>\n",
       "      <td>...</td>\n",
       "      <td>...</td>\n",
       "      <td>...</td>\n",
       "      <td>...</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>2765</th>\n",
       "      <td>6</td>\n",
       "      <td>6</td>\n",
       "      <td>0</td>\n",
       "      <td>OLD</td>\n",
       "      <td>20183785</td>\n",
       "      <td>점박이 한반도의 공룡2 : 새로운 낙원</td>\n",
       "      <td>2018-12-25</td>\n",
       "      <td>297544650</td>\n",
       "      <td>4.3</td>\n",
       "      <td>-167912650</td>\n",
       "      <td>-36.1</td>\n",
       "      <td>2941541400</td>\n",
       "      <td>41686</td>\n",
       "      <td>-15948</td>\n",
       "      <td>-27.7</td>\n",
       "      <td>375312</td>\n",
       "      <td>553</td>\n",
       "      <td>943</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>2766</th>\n",
       "      <td>7</td>\n",
       "      <td>7</td>\n",
       "      <td>1</td>\n",
       "      <td>OLD</td>\n",
       "      <td>20182421</td>\n",
       "      <td>그린치</td>\n",
       "      <td>2018-12-19</td>\n",
       "      <td>185433950</td>\n",
       "      <td>2.7</td>\n",
       "      <td>-67594250</td>\n",
       "      <td>-26.7</td>\n",
       "      <td>3675441950</td>\n",
       "      <td>26250</td>\n",
       "      <td>-5453</td>\n",
       "      <td>-17.2</td>\n",
       "      <td>485064</td>\n",
       "      <td>446</td>\n",
       "      <td>635</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>2767</th>\n",
       "      <td>8</td>\n",
       "      <td>8</td>\n",
       "      <td>-1</td>\n",
       "      <td>OLD</td>\n",
       "      <td>20168773</td>\n",
       "      <td>마약왕</td>\n",
       "      <td>2018-12-19</td>\n",
       "      <td>209406100</td>\n",
       "      <td>3.0</td>\n",
       "      <td>-92312800</td>\n",
       "      <td>-30.6</td>\n",
       "      <td>15784724552</td>\n",
       "      <td>25769</td>\n",
       "      <td>-7205</td>\n",
       "      <td>-21.9</td>\n",
       "      <td>1813594</td>\n",
       "      <td>533</td>\n",
       "      <td>1178</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>2768</th>\n",
       "      <td>9</td>\n",
       "      <td>9</td>\n",
       "      <td>0</td>\n",
       "      <td>OLD</td>\n",
       "      <td>20183479</td>\n",
       "      <td>극장판 짱구는 못말려: 아뵤! 쿵후 보이즈 ~라면 대란~</td>\n",
       "      <td>2018-12-19</td>\n",
       "      <td>123978500</td>\n",
       "      <td>1.8</td>\n",
       "      <td>-82081550</td>\n",
       "      <td>-39.8</td>\n",
       "      <td>2148708050</td>\n",
       "      <td>17453</td>\n",
       "      <td>-8701</td>\n",
       "      <td>-33.3</td>\n",
       "      <td>277206</td>\n",
       "      <td>269</td>\n",
       "      <td>370</td>\n",
       "    </tr>\n",
       "    <tr>\n",
       "      <th>2769</th>\n",
       "      <td>10</td>\n",
       "      <td>10</td>\n",
       "      <td>0</td>\n",
       "      <td>OLD</td>\n",
       "      <td>20183238</td>\n",
       "      <td>스파이더맨: 뉴 유니버스</td>\n",
       "      <td>2018-12-12</td>\n",
       "      <td>91504350</td>\n",
       "      <td>1.3</td>\n",
       "      <td>-25207850</td>\n",
       "      <td>-21.6</td>\n",
       "      <td>5305289076</td>\n",
       "      <td>11607</td>\n",
       "      <td>-1417</td>\n",
       "      <td>-10.9</td>\n",
       "      <td>639934</td>\n",
       "      <td>152</td>\n",
       "      <td>270</td>\n",
       "    </tr>\n",
       "  </tbody>\n",
       "</table>\n",
       "<p>2770 rows × 18 columns</p>\n",
       "</div>"
      ],
      "text/plain": [
       "      rnum  rank  rankInten rankOldAndNew   movieCd  \\\n",
       "0        1     1          0           OLD  20150976   \n",
       "1        2     2          0           OLD  20170590   \n",
       "2        3     3          0           OLD  20170402   \n",
       "3        4     4          0           OLD  20179462   \n",
       "4        5     5          0           OLD  20174965   \n",
       "...    ...   ...        ...           ...       ...   \n",
       "2765     6     6          0           OLD  20183785   \n",
       "2766     7     7          1           OLD  20182421   \n",
       "2767     8     8         -1           OLD  20168773   \n",
       "2768     9     9          0           OLD  20183479   \n",
       "2769    10    10          0           OLD  20183238   \n",
       "\n",
       "                              movieNm      openDt    salesAmt  salesShare  \\\n",
       "0                           신과함께-죄와 벌  2017-12-20  2205440800        44.5   \n",
       "1                                1987  2017-12-27  1643436600        33.1   \n",
       "2                                 강철비  2017-12-14   358149600         7.2   \n",
       "3                              위대한 쇼맨  2017-12-20   269239500         5.4   \n",
       "4                   극장판 포켓몬스터 너로 정했다!  2017-12-21   123797500         2.5   \n",
       "...                               ...         ...         ...         ...   \n",
       "2765            점박이 한반도의 공룡2 : 새로운 낙원  2018-12-25   297544650         4.3   \n",
       "2766                              그린치  2018-12-19   185433950         2.7   \n",
       "2767                              마약왕  2018-12-19   209406100         3.0   \n",
       "2768  극장판 짱구는 못말려: 아뵤! 쿵후 보이즈 ~라면 대란~  2018-12-19   123978500         1.8   \n",
       "2769                    스파이더맨: 뉴 유니버스  2018-12-12    91504350         1.3   \n",
       "\n",
       "      salesInten  salesChange     salesAcc  audiCnt  audiInten  audiChange  \\\n",
       "0    -5509708300        -71.4  78271086332   294339    -622313       -67.9   \n",
       "1    -2817025500        -63.2  21357902737   217247    -314222       -59.1   \n",
       "2     -586079000        -62.1  33297275766    48122     -66176       -57.9   \n",
       "3     -240708200        -47.2   7436214400    35177     -24893       -41.4   \n",
       "4     -139089000        -52.9   3504213700    17929     -16174       -47.4   \n",
       "...          ...          ...          ...      ...        ...         ...   \n",
       "2765  -167912650        -36.1   2941541400    41686     -15948       -27.7   \n",
       "2766   -67594250        -26.7   3675441950    26250      -5453       -17.2   \n",
       "2767   -92312800        -30.6  15784724552    25769      -7205       -21.9   \n",
       "2768   -82081550        -39.8   2148708050    17453      -8701       -33.3   \n",
       "2769   -25207850        -21.6   5305289076    11607      -1417       -10.9   \n",
       "\n",
       "      audiAcc  scrnCnt  showCnt  \n",
       "0     9750486     1446     7019  \n",
       "1     2690793     1063     5044  \n",
       "2     4176713      580     1541  \n",
       "3      909832      444      949  \n",
       "4      467287      371      510  \n",
       "...       ...      ...      ...  \n",
       "2765   375312      553      943  \n",
       "2766   485064      446      635  \n",
       "2767  1813594      533     1178  \n",
       "2768   277206      269      370  \n",
       "2769   639934      152      270  \n",
       "\n",
       "[2770 rows x 18 columns]"
      ]
     },
     "execution_count": 15,
     "metadata": {},
     "output_type": "execute_result"
    }
   ],
   "source": [
    "## 출력을 통해서 확인\n",
    "pd.read_csv('data_result.csv')"
   ]
  }
 ],
 "metadata": {
  "kernelspec": {
   "display_name": "Python 3 (ipykernel)",
   "language": "python",
   "name": "python3"
  },
  "language_info": {
   "codemirror_mode": {
    "name": "ipython",
    "version": 3
   },
   "file_extension": ".py",
   "mimetype": "text/x-python",
   "name": "python",
   "nbconvert_exporter": "python",
   "pygments_lexer": "ipython3",
   "version": "3.9.7"
  }
 },
 "nbformat": 4,
 "nbformat_minor": 4
}
